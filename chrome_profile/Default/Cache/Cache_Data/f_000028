import{r as k}from"./tslib.es6-BJp0-jPt.js";import{i as ie,s as be,f as ne,a as H,g as L,b as $,c as ue,d as W,e as G,h as q,_ as S,j as D,k as _,n as Ve,l as he,I as le,m as Se,o as Oe,q as M,r as R,t as Pe,u as Ie}from"./parse-BTffaBs-.js";function Ee(e){return e instanceof Element&&(e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.tagName==="BUTTON")}function J(e){return Ee(e)&&e.type!=="submit"&&e.type!=="button"&&e.type!=="reset"}function ke(e){var r,t,a=e.target,i=e.submitter;return(r=(t=i==null?void 0:i.getAttribute("formaction"))!==null&&t!==void 0?t:a.getAttribute("action"))!==null&&r!==void 0?r:"".concat(location.pathname).concat(location.search)}function Fe(e){var r,t=e.target,a=e.submitter,i=(r=a==null?void 0:a.getAttribute("formenctype"))!==null&&r!==void 0?r:t.enctype;return i==="multipart/form-data"?i:"application/x-www-form-urlencoded"}function we(e){var r,t,a=e.target,i=e.submitter,n=(r=(t=i==null?void 0:i.getAttribute("formmethod"))!==null&&t!==void 0?t:a.getAttribute("method"))===null||r===void 0?void 0:r.toUpperCase();switch(n){case"POST":case"PUT":case"PATCH":case"DELETE":return n}return"GET"}function Ae(e,r){if(ie(!!e,"Failed to submit the form. The element provided is null or undefined."),typeof e.requestSubmit=="function")e.requestSubmit(r);else{var t=new SubmitEvent("submit",{bubbles:!0,cancelable:!0,submitter:r});e.dispatchEvent(t)}}function ee(e,r){var t,a,i,n,s,l=r?void 0:e.lastResult,v=e.defaultValue?be(e.defaultValue):{},p=(t=l==null?void 0:l.initialValue)!==null&&t!==void 0?t:v,P={formId:e.formId,isValueUpdated:!1,submissionStatus:l==null?void 0:l.status,defaultValue:v,initialValue:p,value:p,constraint:(a=e.constraint)!==null&&a!==void 0?a:{},validated:(i=l==null||(n=l.state)===null||n===void 0?void 0:n.validated)!==null&&i!==void 0?i:{},key:r?S({"":L()},j(v)):j(v),error:(s=l==null?void 0:l.error)!==null&&s!==void 0?s:{}};return oe(P,l==null?void 0:l.intent,l==null?void 0:l.fields),P}function j(e,r){return Object.entries(ne(e,{prefix:r})).reduce((t,a)=>{var[i,n]=a;if(Array.isArray(n))for(var s=0;s<n.length;s++)t[H(i,s)]=L();return t},{})}function re(e,r){for(var t of Object.keys(e.error).concat(r??[]))e.validated[t]=!0}function oe(e,r,t,a){var i;if(!r){re(e,t);return}switch(r.type){case"validate":{r.payload.name?e.validated[r.payload.name]=!0:re(e,t);break}case"update":{var{validated:n,value:s}=r.payload,l=H(r.payload.name,r.payload.index);typeof s<"u"&&te(e,l??"",s),typeof n<"u"&&(l?W(e.validated,l,()=>{}):e.validated={},n?((G(s)||Array.isArray(s))&&Object.assign(e.validated,ne(s,{resolve(){return!0},prefix:l})),e.validated[l??""]=!0):l&&delete e.validated[l]);break}case"reset":{var v=H(r.payload.name,r.payload.index),p=ue(e.defaultValue,v);te(e,v,p),v?(W(e.validated,v,()=>{}),delete e.validated[v]):e.validated={};break}case"insert":case"remove":case"reorder":{a&&(e.initialValue=D(e.initialValue),e.key=D(e.key),$(e.key,r,c=>!Array.isArray(c)&&!G(c)?L():Object.assign(j(c),{[Ie]:L()})),Oe(e.initialValue,r)),$(e.validated,r),e.validated[r.payload.name]=!0;break}}var P=(i=t==null?void 0:t.filter(c=>e.validated[c]))!==null&&i!==void 0?i:[];e.error=Object.entries(e.error).reduce((c,I)=>{var[O,h]=I;return(e.validated[O]||P.some(E=>q(O,E)))&&(c[O]=h),c},{})}function te(e,r,t){if(r===""){e.initialValue=t,e.value=t,e.key=S(S({},j(t)),{},{"":L()});return}e.initialValue=D(e.initialValue),e.value=D(e.value),e.key=D(e.key),_(e.initialValue,r,()=>t),_(e.value,r,()=>t),(G(t)||Array.isArray(t))&&(W(e.key,r,()=>{}),Object.assign(e.key,j(t,r))),e.key[r]=L()}function U(e){var r={};return new Proxy(r,{get(t,a,i){var n;if(typeof a=="string")return(n=r[a])!==null&&n!==void 0?n:r[a]=e(a,i)}})}function z(e){var r=Ve(e);return U((t,a)=>{if(t==="")return r;var i=M(t),n=R(i.slice(0,-1)),s=R(i.slice(-1)),l=a[n];return ue(l,s)})}function Ne(e){return U((r,t)=>{var a,i=e[r];if(!i){for(var n=M(r),s=n.length-1;s>=0;s--){var l=n[s];if(typeof l=="number"&&!Number.isNaN(l)){n[s]=Number.NaN;break}}var v=R(n);r!==v&&(i=t[v])}return(a=i)!==null&&a!==void 0?a:{}})}function Le(e){return U((r,t)=>{var a=e[r],i=M(r);if(i.length===0)return a;var n=t[R(i.slice(0,-1))];return typeof n>"u"?a:"".concat(n,"/").concat(a??i.at(-1))})}function Te(e){return U(r=>{var t=Object.keys(e);if(r==="")return t.length===0;for(var a of t)if(q(a,r)&&typeof e[a]<"u")return!1;return!0})}function Ce(e,r,t){return U(a=>JSON.stringify(e[a])!==JSON.stringify(r[a],(i,n)=>a===""&&i===""&&n?Object.entries(n).reduce((s,l)=>{var[v,p]=l;return t(v)?Object.assign(s??{},{[v]:p}):s},void 0):n))}function A(e,r,t,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:(O,h)=>JSON.stringify(O)!==JSON.stringify(h);if(a&&e!==r){var n,s,l=(n=a.prefix)!==null&&n!==void 0?n:[],v=(s=a.name)!==null&&s!==void 0?s:[],p=l.length===0?v:Array.from(new Set([...Object.keys(e),...Object.keys(r)])),P=function(h){if(l.length===0||v.includes(h)||l.some(C=>q(h,C))){var E;if((E=t[h])!==null&&E!==void 0||(t[h]=i(e[h],r[h])),t[h])return{v:!0}}},c;for(var I of p)if(c=P(I),c)return c.v}return!1}function De(e){var r=[],t=e,a=ee(e),i=s(a);function n(){return document.forms.namedItem(t.formId)}function s(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u,o=arguments.length>2?arguments[2]:void 0,f=!o||d.defaultValue!==u.defaultValue?z(u.defaultValue):o.defaultValue,m=u.initialValue===u.defaultValue?f:!o||d.initialValue!==u.initialValue?z(u.initialValue):o.initialValue,g=u.value===u.initialValue?m:!o||d.value!==u.value?z(u.value):o.value;return{submissionStatus:u.submissionStatus,defaultValue:f,initialValue:m,value:g,error:!o||d.error!==u.error?u.error:o.error,validated:u.validated,constraint:!o||d.constraint!==u.constraint?Ne(u.constraint):o.constraint,key:!o||d.key!==u.key?Le(u.key):o.key,valid:!o||d.error!==u.error?Te(u.error):o.valid,dirty:!o||d.defaultValue!==u.defaultValue||d.value!==u.value?Ce(f,g,y=>{var b,F;return(b=(F=t.shouldDirtyConsider)===null||F===void 0?void 0:F.call(t,y))!==null&&b!==void 0?b:!0}):o.dirty}}function l(u){var d=a,o=i,f=s(u,d,o);a=u,i=f;var m={value:{},error:{},initialValue:{},key:{},valid:{},dirty:{}};for(var g of r){var y,b=(y=g.getSubject)===null||y===void 0?void 0:y.call(g);(!b||b.formId&&d.formId!==u.formId||b.status&&o.submissionStatus!==f.submissionStatus||A(o.error,f.error,m.error,b.error)||A(o.initialValue,f.initialValue,m.initialValue,b.initialValue)||A(o.key,f.key,m.key,b.key,(F,B)=>F!==B)||A(o.valid,f.valid,m.valid,b.valid,v)||A(o.dirty,f.dirty,m.dirty,b.dirty,v)||A(o.value,f.value,m.value,b.value))&&g.callback()}}function v(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return u!==d}function p(){return JSON.stringify({validated:a.validated})}function P(u){var d=u.target,o=u.submitter;ie(d===n(),"The submit event is dispatched by form#".concat(d.id," instead of form#").concat(t.formId));var f=he(d,o),m={formData:f,action:ke(u),encType:Fe(u),method:we(u)};if(typeof(t==null?void 0:t.onValidate)>"u")return m;var g=t.onValidate({form:d,formData:f,submitter:o});if(g.status==="success"||g.error!==null){var y=g.reply();x(S(S({},y),{},{status:y.status!=="success"?y.status:void 0}))}return S(S({},m),{},{submission:g})}function c(u){var d=n(),o=u.target;return!d||!J(o)||o.form!==d||!o.form.isConnected||o.name===""?null:o}function I(u,d){var{shouldValidate:o="onSubmit",shouldRevalidate:f=o}=t,m=a.validated[u.name];return m?f===d&&(d==="onInput"||a.isValueUpdated):o===d}function O(u){var d=new FormData(u),o=Pe(d);l(S(S({},a),{},{isValueUpdated:!0,value:o.payload}))}function h(u){var d=c(u);!d||!d.form||(u.defaultPrevented||!I(d,"onInput")?O(d.form):K({type:"validate",payload:{name:d.name}}))}function E(u){var d=c(u);!d||u.defaultPrevented||!I(d,"onBlur")||K({type:"validate",payload:{name:d.name}})}function C(){l(ee(t,!0))}function ce(u){var d=n();u.type!=="reset"||u.target!==d||u.defaultPrevented||C()}function x(u){var d,o,f=n();if(!u.initialValue){C();return}var m=Object.entries((d=u.error)!==null&&d!==void 0?d:{}).reduce((b,F)=>{var[B,Y]=F,Z=Y===null?a.error[B]:Y;return Z&&(b[B]=Z),b},{}),g=S(S({},a),{},{isValueUpdated:!1,submissionStatus:u.status,value:u.initialValue,validated:S(S({},a.validated),(o=u.state)===null||o===void 0?void 0:o.validated),error:m});if(oe(g,u.intent,u.fields,!0),l(g),f&&u.status==="error"){for(var y of f.elements)if(J(y)&&a.error[y.name]){y.focus();break}}}function ge(u){var d=t.formId,o=t.lastResult;Object.assign(t,u),t.formId!==d?C():u.lastResult&&u.lastResult!==o&&x(u.lastResult)}function me(u,d){var o={callback:u,getSubject:d};return r.push(o),()=>{r=r.filter(f=>f!==o)}}function ye(){return i}function K(u){var d=n(),o=document.createElement("button"),f=Q(u);o.name=f.name,o.value=f.value,o.hidden=!0,o.formNoValidate=!0,d==null||d.appendChild(o),Ae(d,o),d==null||d.removeChild(o)}function Q(u){return{name:le,value:Se(u),form:t.formId,formNoValidate:!0}}function w(u){var d=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return K({type:u,payload:f})};return Object.assign(d,{getButtonProps(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q({type:u,payload:o})}})}function pe(){var u=new MutationObserver(d=>{var o=n();if(o)for(var f of d){var m=f.type==="childList"?[...f.addedNodes,...f.removedNodes]:[f.target];for(var g of m){var y=J(g)?g:g instanceof HTMLElement?g.querySelector("input,select,textarea"):null;if((y==null?void 0:y.form)===o){O(o);return}}}});return u.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["form","name"]}),()=>{u.disconnect()}}return{getFormId(){return a.formId},submit:P,onReset:ce,onInput:h,onBlur:E,onUpdate:ge,validate:w("validate"),reset:w("reset"),update:w("update"),insert:w("insert"),remove:w("remove"),reorder:w("reorder"),subscribe:me,getState:ye,getSerializedState:p,observe:pe}}function ae(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,a)}return t}function V(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ae(Object(t),!0).forEach(function(a){Re(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ae(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Re(e,r,t){return r=qe(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function je(e,r){if(e==null)return{};var t={},a=Object.keys(e),i,n;for(n=0;n<a.length;n++)i=a[n],!(r.indexOf(i)>=0)&&(t[i]=e[i]);return t}function Ue(e,r){if(e==null)return{};var t=je(e,r),a,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)a=n[i],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}function Be(e,r){if(typeof e!="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function qe(e){var r=Be(e,"string");return typeof r=="symbol"?r:String(r)}var Me=Symbol("wrapped");function Ke(e,r){var t=k.useCallback(a=>e.subscribe(a,()=>r==null?void 0:r.current),[e,r]);return k.useSyncExternalStore(t,e.getState,e.getState)}function Je(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=k.useRef(e);return r.current=e,r}function N(e,r,t,a){if(r==="status"||r==="formId")e.current[r]=!0;else if(typeof t<"u"&&typeof a<"u"){var i,n;e.current[r]=V(V({},e.current[r]),{},{[t]:((i=(n=e.current[r])===null||n===void 0?void 0:n[t])!==null&&i!==void 0?i:[]).concat(a)})}}function de(e,r,t){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",i=a?"".concat(e.getFormId(),"-").concat(a):e.getFormId(),n=e.getState();return new Proxy({id:i,name:a,errorId:"".concat(i,"-error"),descriptionId:"".concat(i,"-description"),get initialValue(){return n.initialValue[a]},get value(){return n.value[a]},get errors(){return n.error[a]},get key(){return n.key[a]},get valid(){return n.valid[a]},get dirty(){return n.dirty[a]},get allErrors(){if(a==="")return n.error;var s={};for(var[l,v]of Object.entries(n.error))q(l,a)&&(s[l]=v);return s},get getFieldset(){return()=>new Proxy({},{get(s,l,v){return typeof l=="string"?se(e,r,t,a,l):Reflect.get(s,l,v)}})}},{get(s,l,v){if(n===t)switch(l){case"id":case"errorId":case"descriptionId":N(r,"formId");break;case"key":case"initialValue":case"value":case"valid":case"dirty":N(r,l,"name",a);break;case"errors":case"allErrors":N(r,"error",l==="errors"?"name":"prefix",a);break}return Reflect.get(s,l,v)}})}function se(e,r,t){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0,n=typeof i>"u"?a:R([...M(a),i]);return new Proxy({},{get(s,l,v){var p,P=de(e,r,t,n),c=e.getState();switch(l){case"formId":return c===t&&N(r,"formId"),e.getFormId();case"required":case"minLength":case"maxLength":case"min":case"max":case"pattern":case"step":case"multiple":return(p=c.constraint[n])===null||p===void 0?void 0:p[l];case"getFieldList":return()=>{var I,O=(I=c.initialValue[n])!==null&&I!==void 0?I:[];if(c===t&&N(r,"initialValue","name",n),!Array.isArray(O))throw new Error("The initial value at the given name is not a list");return Array(O.length).fill(0).map((h,E)=>se(e,r,t,n,E))}}return Reflect.get(P,l,v)}})}function ze(e,r,t,a){return new Proxy({},{get(i,n,s){var l=de(e,r,t),v=e.getState();switch(n){case"context":return{[Me]:e};case"status":return v===t&&N(r,"status"),v.submissionStatus;case"validate":case"update":case"reset":case"insert":case"remove":case"reorder":return e[n];case"onSubmit":return e.submit;case"noValidate":return a}return Reflect.get(l,n,s)}})}function He(e){var{onSubmit:r}=e,t=De(e);return V(V({},t),{},{submit(a){var i=a.nativeEvent,n=t.submit(i);if(!n.submission||n.submission.status==="success"||n.submission.error===null){if(!n.formData.has(le)){var s;(s=r)===null||s===void 0||s(a,n)}}else a.preventDefault()},onUpdate(a){r=a.onSubmit,t.onUpdate(a)}})}var We=["id"],X=typeof document>"u"?k.useEffect:k.useLayoutEffect;function Ge(e){var r=k.useId();return e??r}function Xe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,[r,t]=k.useState(e);return X(()=>{r||t(!0)},[r]),r}function Ze(e){var{id:r}=e,t=Ue(e,We),a=Ge(r),[i]=k.useState(()=>He(V(V({},t),{},{formId:a})));X(()=>{var p=i.observe();return document.addEventListener("input",i.onInput),document.addEventListener("focusout",i.onBlur),document.addEventListener("reset",i.onReset),()=>{p(),document.removeEventListener("input",i.onInput),document.removeEventListener("focusout",i.onBlur),document.removeEventListener("reset",i.onReset)}},[i]),X(()=>{i.onUpdate(V(V({},t),{},{formId:a}))});var n=Je(),s=Ke(i,n),l=Xe(e.defaultNoValidate),v=ze(i,n,s,l);return[v,v.getFieldset()]}function T(e){for(var r in e)e[r]===void 0&&delete e[r];return e}function ve(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r.ariaAttributes<"u"&&!r.ariaAttributes)return{};var t=r.ariaInvalid==="allErrors"?!e.valid:typeof e.errors<"u",a=r.ariaDescribedBy;return T({"aria-invalid":t||void 0,"aria-describedby":t?"".concat(e.errorId," ").concat(a??"").trim():a})}function $e(e,r){return T(V({id:e.id,onSubmit:e.onSubmit,noValidate:e.noValidate},ve(e,r)))}function xe(e,r){return T(V({id:e.id,name:e.name,form:e.formId},ve(e,r)))}function fe(e,r){return T(V({key:e.key,required:e.required||void 0},xe(e,r)))}function _e(e,r){var t=V(V({},fe(e,r)),{},{type:r.type,minLength:e.minLength,maxLength:e.maxLength,min:e.min,max:e.max,step:e.step,pattern:e.pattern,multiple:e.multiple});return(typeof r.value>"u"||r.value)&&(r.type==="checkbox"||r.type==="radio"?(t.value=typeof r.value=="string"?r.value:"on",t.defaultChecked=Array.isArray(e.initialValue)?e.initialValue.includes(r.value):e.initialValue===t.value):typeof e.initialValue=="string"&&(t.defaultValue=e.initialValue)),T(t)}function er(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=V(V({},fe(e,r)),{},{multiple:e.multiple});if(typeof r.value>"u"||r.value){var a;t.defaultValue=Array.isArray(e.initialValue)?e.initialValue.map(i=>"".concat(i??"")):(a=e.initialValue)===null||a===void 0?void 0:a.toString()}return T(t)}export{_e as a,er as b,$e as g,Ze as u};
